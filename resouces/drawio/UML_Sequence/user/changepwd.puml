@startuml user_changepwd

hide footbox
skinparam sequence {
  ParticipantBackgroundColor #fff
  ParticipantFontColor #000
}

participant 用户
participant 用户管理页面
participant 用户管理控制器

activate 用户
用户 -> 用户管理页面: 填写修改密码表单

activate 用户管理页面
用户管理页面 -> 用户管理页面: 两次密码不一致

activate 用户管理页面 #1
用户管理页面 --> 用户: 告知用户重新输入密码
deactivate 用户管理页面 #1

用户管理页面 -> 用户管理控制器: 提交密码信息

activate 用户管理控制器
用户管理控制器 -> 用户管理控制器: 新旧密码一致

activate 用户管理控制器 #1
用户管理控制器 --> 用户管理页面: 告知用户重新输入密码
activate 用户管理页面 #1
deactivate 用户管理控制器 #1

用户管理页面 --> 用户: 告知用户重新输入密码
deactivate 用户管理页面 #1

用户管理控制器 -> 用户管理控制器: 旧密码错误

activate 用户管理控制器 #1
用户管理控制器 --> 用户管理页面: 告知用户重新输入旧密码
activate 用户管理页面 #1
deactivate 用户管理控制器 #1
用户管理页面 --> 用户: 告知用户重新输入旧密码
deactivate 用户管理页面 #1

用户管理控制器 -> 用户管理控制器: 查询并更新用户数据
用户管理控制器 --> 用户管理页面: 返回修改结果
deactivate 用户管理控制器

用户管理页面 --> 用户: 显示修改结果
deactivate 用户管理页面

@enduml